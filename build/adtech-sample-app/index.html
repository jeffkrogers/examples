<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link href="https://cdn.reflect.io/latest/reflect.css" rel="stylesheet" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">

		<title>Adtech Sample App</title>

		<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
	  <meta name="viewport" content="width=device-width" />

	  <!-- Bootstrap core CSS     -->
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">

	  <!--  Light Bootstrap Table core CSS by Creative Tim  -->
	  <link href="assets/css/light-bootstrap-dashboard.css" rel="stylesheet"/>

	  <!--     Fonts and icons     -->
	  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
	  <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
	  <link href="assets/css/pe-icon-7-stroke.css" rel="stylesheet" />
	</head>

	<body>
		<div class="wrapper">
		    <div class="sidebar" data-color="purple">

		    	<div class="sidebar-wrapper">
		            <div class="logo">
		                <a href="./index.html" class="simple-text">
											<img src="assets/img/app-logo.png" alt="app logo">Monster Social
		                </a>
		            </div>

		            <ul class="nav">
		                <li class="active">
		                    <a href="#">
		                        <i class="pe-7s-id"></i>
		                        <p>Contacts</p>
		                    </a>
		                    <a href="./index.html">
		                        <i class="pe-7s-graph1"></i>
		                        <p>Analytics</p>
		                    </a>
		                    <a href="#">
		                        <i class="pe-7s-prev"></i>
		                        <p>History</p>
		                    </a>
		                </li>
										<li class="active-pro">
		                    <a href="#">
		                        <i class="pe-7s-rocket"></i>
		                        <p>Upgrade to PRO</p>
		                    </a>
		                </li>
		            </ul>
		    	</div>
		    </div>

		    <div class="main-panel">
		        <nav class="navbar navbar-default navbar-fixed-top">
		            <div class="container-fluid">
		                <div class="navbar-header">
		                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
		                        <span class="sr-only">Toggle navigation</span>
		                        <span class="icon-bar"></span>
		                        <span class="icon-bar"></span>
		                        <span class="icon-bar"></span>
		                    </button>
												<div class="logo">
						                <a href="./index.html" class="simple-text">
															<img src="assets/img/app-logo.png" alt="app logo">
						                </a>
						            </div>
		                    <a class="navbar-brand" href="#"><span class="hidden-tablet">My </span><span class="hidden-mobile">Return on </span>Ad Retargeting</a>
		                </div>
		                <div class="collapse navbar-collapse">
		                    <ul class="nav navbar-nav navbar-left">
		                        <li class="dropdown">
		                              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
		                                    <i class="fa fa-globe"></i>
		                                    <i class="pe-7s-angle-down"></i>
		                                    <span class="notification">3</span>
		                              </a>
		                              <ul class="dropdown-menu">
																		<li><a href="#">46 new conversions</a></li>
		                                <li><a href="#">Facebook goal reached</a></li>
		                                <li><a href="#">Instagram campaign depleted</a></li>
		                              </ul>
		                        </li>
		                        <li>
		                           <a href="#">
		                                <i class="fa fa-search"></i>
		                            </a>
		                        </li>
		                    </ul>
		                    <ul class="nav navbar-nav navbar-right">
		                        <li class="dropdown">
		                              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
		                                    <img src="assets/img/user-avatar.png" alt="user avatar">
																				<i class="pe-7s-angle-down"></i>
		                              </a>
		                              <ul class="dropdown-menu">
		                                <li><a href="#">My account</a></li>
		                                <li><a href="#">My team</a></li>
		                                <li><a href="#">Help</a></li>
		                                <li class="divider"></li>
		                                <li><a href="#">Log out</a></li>
		                              </ul>
		                        </li>

		                    </ul>
		                </div>
		            </div>
		        </nav>

		        <div class="content">
		            <div class="container-fluid">
		                <div class="row">
												<div class="view-container">
										        <div id="view"></div>
									      </div>
										</div>
								</div>
						</div>

		    </div>
		</div>
	</body>

  <!--   Core JS Files   -->
	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" type="text/javascript"></script>

	<!--  Reflect JS -->
  <script src="https://cdn.reflect.io/latest/reflect.js"></script>
	<script type="text/javascript">
      //instantiate new instance
      var ui = new ReflectUI();

      //call to render the view
      function render() {
				ui.withDates(['2017-07-05', '2017-08-05'], ['2017-09-05', '2017-10-05'])

				if ($(window).width() < 750) {
					ui.view(document.getElementById('view'), 'ut5x8iIiSxqY3d8HZNApiA');
				} else {
					ui.view(document.getElementById('view'), 'ufLtfaBpTMaR0JKl3cmNfQ');
				}
      }

			//call to filter by platform
      function filterByPlatform(tag) {
        var platform = {
          field: 'Social Platform',
          op: '=',
          value: tag,
          removable: true
        }
        ui.withFilters([platform]);
      }

			//call to drill-into data points and legend items
      function drillIntoDataPoint(data) {
				var platform;

				if ('rowData' in data) {
					platform = data.rowData['Social Platform'];
				} else {
					platform = data.value;
				}

				filterByPlatform(platform);

				ui.view(document.getElementById('view'), 'IpBoOweIRKS2swPlGJ57Kw');
      }

			//click on a data point or legend item to trigger view swap
      ui.on('impressions', 'dataPointClick', function(data) {
        drillIntoDataPoint(data)
      });
      ui.on('spend', 'dataPointClick', function(data) {
        drillIntoDataPoint(data)
      });
      ui.on('conversions', 'dataPointClick', function(data) {
        drillIntoDataPoint(data)
      });
			ui.on('impressions', 'legendItemClick', function(data) {
        drillIntoDataPoint(data)
      });

			render();

	</script>

	<!-- Swap views for better mobile viewing -->
	<script type="text/javascript">
		var startSize = $(window).width();
		window.onresize = function(event) {
			if ($(window).width() < 750 && startSize >= 750) {
				ui.withFilters({});

				ui.view(document.getElementById('view'), 'ut5x8iIiSxqY3d8HZNApiA');
			} else if ($(window).width() >= 750 && startSize < 750) {
				ui.withFilters({});

				ui.view(document.getElementById('view'), 'ufLtfaBpTMaR0JKl3cmNfQ');
			}

			startSize = $(window).width();
		};
	</script>

</html>
